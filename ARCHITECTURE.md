# Distillation Curve Interconversion - Architecture & Data Flow

## ğŸ—ï¸ System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User Input (GUI or Python API)                                 â”‚
â”‚  â€¢ Distillation data [vol%, temp]                              â”‚
â”‚  â€¢ Density (kg/mÂ³)                                             â”‚
â”‚  â€¢ Input type (D86/D2887/TBP)                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Oil.__init__()                  â”‚
        â”‚  [bp_conversions.py]             â”‚
        â”‚  Entry point for all conversions â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Input Type Detection                           â”‚
        â”‚ (Route to appropriate converter)               â”‚
        â–¼                      â–¼                    â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ D86    â”‚         â”‚   D2887    â”‚       â”‚  TBP     â”‚
    â”‚ Input  â”‚         â”‚  (SimDis)  â”‚       â”‚  Input   â”‚
    â”‚        â”‚         â”‚   Input    â”‚       â”‚          â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
         â”‚                    â”‚                   â”‚
         â”‚ Use D86            â”‚ Convert to D86    â”‚ Convert to D86
         â”‚ directly           â”‚ via Riazi inverse â”‚ via inverse
         â”‚                    â”‚                   â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  D86 Data (normalized format)               â”‚
        â”‚  â€¢ Used as base for all conversions         â”‚
        â”‚  â€¢ Temperatures in Â°C                       â”‚
        â”‚  â€¢ Minimum 3 points, max 8+ points         â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                   â”‚                   â”‚
         â–¼                   â–¼                   â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ API     â”‚        â”‚ Daubert  â”‚        â”‚ Riazi    â”‚
    â”‚ D86â†’TBP â”‚        â”‚D86â†’TBP   â”‚        â”‚D86â†’D2887 â”‚
    â”‚ Method  â”‚        â”‚ Method   â”‚        â”‚ Method   â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
         â”‚                  â”‚                   â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ PCHIP Interpolators  â”‚
                  â”‚ (scipy)              â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                  â”‚                  â”‚
         â–¼                  â–¼                  â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ D86_    â”‚        â”‚ D2887_   â”‚      â”‚ TBP_     â”‚
    â”‚ interp  â”‚        â”‚ interp   â”‚      â”‚ interp   â”‚
    â”‚ (smooth â”‚        â”‚ (smooth  â”‚      â”‚ (smooth  â”‚
    â”‚ curve)  â”‚        â”‚ curve)   â”‚      â”‚ curve)   â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
         â”‚                  â”‚                  â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚  Property Calculator â”‚
                  â”‚  â€¢ VABP (Â°F)         â”‚
                  â”‚  â€¢ MeABP (Â°C)        â”‚
                  â”‚  â€¢ Watson K          â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                                     â”‚
         â–¼                                     â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ GUI Output   â”‚               â”‚ Python API       â”‚
    â”‚ â€¢ Plots      â”‚               â”‚ â€¢ Interpolators  â”‚
    â”‚ â€¢ Tables     â”‚               â”‚ â€¢ Properties     â”‚
    â”‚ â€¢ Export CSV â”‚               â”‚ â€¢ Direct access  â”‚
    â”‚ â€¢ Export XLS â”‚               â”‚                  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Data Flow - D2887 Input Example

```
INPUT: D2887 Data
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  D2887 Kerosene     â”‚
â”‚ Vol%    Temp (Â°C)   â”‚
â”‚  0      160.0       â”‚
â”‚ 10      180.5       â”‚
â”‚ 30      205.0       â”‚
â”‚ 50      225.0       â”‚
â”‚ 70      245.0       â”‚
â”‚ 90      270.0       â”‚
â”‚100      290.0       â”‚
â”‚ Density: 820 kg/mÂ³  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ D2887_to_D86()
           â”‚ [Riazi inverse correlation]
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  D86 Intermediate    â”‚
â”‚ (computed from input)â”‚
â”‚ Vol%    Temp (Â°C)    â”‚
â”‚  0      154.2 â†â”€â”€â”€â”€â”€â”€â”¼â”€ ~5.8Â°C lower
â”‚ 10      175.0        â”‚   (heat loss)
â”‚ 30      200.6        â”‚
â”‚ 50      220.8        â”‚
â”‚ 70      240.2        â”‚
â”‚ 90      263.2        â”‚
â”‚100      282.0        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚             â”‚          â”‚            â”‚
    â”‚ Use D86     â”‚ Use D86  â”‚ Use D2887  â”‚
    â”‚ directly    â”‚ for TBP  â”‚ for D2887  â”‚
    â”‚ [No further â”‚ calc     â”‚ [No furtherâ”‚
    â”‚  conversion]â”‚          â”‚ conversion]â”‚
    â”‚             â”‚          â”‚            â”‚
    â–¼             â–¼          â–¼            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚D86 Outputâ”‚  â”‚TBP via â”‚  â”‚D2887   â”‚  â”‚ Originalâ”‚
â”‚~154-282Â°C   â”‚API or  â”‚  â”‚via     â”‚  â”‚ D2887   â”‚
â”‚~5-8Â°C lower â”‚Daubert â”‚  â”‚Riazi   â”‚  â”‚used as  â”‚
â”‚than input   â”‚~157-284â”‚  â”‚curve   â”‚  â”‚is (no   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚        â”‚  â”‚        â”‚  â”‚conversion
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Conversion Routes Map

```
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚            INPUT FORMAT                 â”‚
        â”‚  [vol%, temperature] list               â”‚
        â”‚  Min 3 points, monotonic temps          â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚              â”‚              â”‚
    â–¼              â–¼              â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”
  â”‚ D86  â”‚    â”‚ D2887   â”‚    â”‚ TBP  â”‚
  â”‚Input â”‚    â”‚(SimDis) â”‚    â”‚Input â”‚
  â”‚      â”‚    â”‚Input    â”‚    â”‚      â”‚
  â””â”€â”€â”¬â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â””â”€â”€â”¬â”€â”€â”€â”˜
     â”‚             â”‚             â”‚
     â”‚ âœ“ Direct    â”‚ D2887â†’D86    â”‚ TBPâ†’D86
     â”‚ use         â”‚ (Riazi inv)  â”‚ (Inverse)
     â”‚             â”‚              â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   D86 (Base Format) â”‚ â—„â”€â”€â”€ Normalized to D86
        â”‚  All further work   â”‚     for all conversions
        â”‚   uses this         â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚              â”‚              â”‚
    â–¼              â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚D86 Keep â”‚   â”‚D86â†’D2887 â”‚   â”‚D86â†’TBP  â”‚
â”‚as is    â”‚   â”‚(Riazi)   â”‚   â”‚(API or  â”‚
â”‚         â”‚   â”‚          â”‚   â”‚Daubert) â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚             â”‚              â”‚
     â”‚             â”‚              â”œâ”€ API Method
     â”‚             â”‚              â”‚ (Linear approx)
     â”‚             â”‚              â”‚
     â”‚             â”‚              â”œâ”€ Daubert Method
     â”‚             â”‚              â”‚ (Polynomial)
     â”‚             â”‚              â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  PCHIP Interpolate  â”‚
        â”‚  (Smooth curves)    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Three Curves Ready â”‚
        â”‚ â€¢ D86_interp(%)     â”‚
        â”‚ â€¢ D2887_interp(%)   â”‚
        â”‚ â€¢ TBP_interp(%)     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   Calculate Properties      â”‚
        â”‚ â€¢ VABP (Volume Avg BP) in Â°Fâ”‚
        â”‚ â€¢ MeABP (Mean Avg BP) in Â°C â”‚
        â”‚ â€¢ Watson K-factor          â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚              â”‚              â”‚
    â–¼              â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GUI    â”‚    â”‚ Export  â”‚    â”‚ Python   â”‚
â”‚ Plots  â”‚    â”‚ CSV/XLS â”‚    â”‚ API      â”‚
â”‚ Tables â”‚    â”‚         â”‚    â”‚ Access   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ§® Correlation Details

### D86 â†” D2887 (Riazi Power-Law)

```
Forward (D86 â†’ D2887):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ T_D2887_R = T_D86_R / a^(1/b)    â”‚
â”‚                                  â”‚
â”‚ Where: Temperatures in Rankine   â”‚
â”‚ a, b = Volume-dependent factors  â”‚
â”‚                                  â”‚
â”‚ Result: D2887 > D86 by 3-7Â°C    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Inverse (D2887 â†’ D86):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ T_D86_R = T_D2887_R Ã— a^(1/b)   â”‚
â”‚                                  â”‚
â”‚ Where: Temperatures in Rankine   â”‚
â”‚ a, b = Volume-dependent factors  â”‚
â”‚                                  â”‚
â”‚ Result: D86 < D2887 by 3-7Â°C    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Coefficients by Volume %:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Vol %   â”‚   a    â”‚   b    â”‚ Î”T(Â°C)   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   0%    â”‚ 0.9965 â”‚ 0.9985 â”‚  5-6     â”‚
â”‚  10%    â”‚ 0.9970 â”‚ 0.9988 â”‚  4-5     â”‚
â”‚  30%    â”‚ 0.9975 â”‚ 0.9990 â”‚  3-4     â”‚
â”‚  50%    â”‚ 0.9977 â”‚ 0.9992 â”‚  3-4     â”‚
â”‚  70%    â”‚ 0.9975 â”‚ 0.9990 â”‚  3.5-4.5 â”‚
â”‚  90%    â”‚ 0.9968 â”‚ 0.9986 â”‚  5-7     â”‚
â”‚ 100%    â”‚ 0.9960 â”‚ 0.9982 â”‚  6-8     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### D86 â†’ TBP (API vs Daubert)

```
API Method (1993):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Simple linear approximation      â”‚
â”‚ TBP â‰ˆ 0.833 Ã— D86 + 6.75        â”‚
â”‚                                  â”‚
â”‚ Pros:  Fast, simple              â”‚
â”‚ Cons:  Less accurate             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Daubert Method (1994):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Temperature-dependent polynomial â”‚
â”‚ TBP = f(D86, VABP, Density)     â”‚
â”‚                                  â”‚
â”‚ Pros:  More accurate             â”‚
â”‚ Cons:  Complex calculation       â”‚
â”‚        Needs VABP first          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Both produce: TBP > D86 by ~20-30Â°C overall
```

---

## ğŸ’¾ Class Structure

```
Oil Class [bp_conversions.py]
â”‚
â”œâ”€ __init__(distillation_input, Density, input_type)
â”‚  â””â”€ Initializes all conversions
â”‚
â”œâ”€ Interpolators (PCHIP objects from scipy)
â”‚  â”œâ”€ D86_interp(vol_percent) â†’ temp_C
â”‚  â”œâ”€ D2887_interp(vol_percent) â†’ temp_C
â”‚  â””â”€ TBP_interp(vol_percent) â†’ temp_C
â”‚
â”œâ”€ Conversion Methods
â”‚  â”œâ”€ API_D86_TBP(d86_data) â†’ interp
â”‚  â”œâ”€ Daubert_ASTM_D86_TBP(d86_data) â†’ interp
â”‚  â”œâ”€ D86_to_D2887(d86_data) â†’ interp
â”‚  â”œâ”€ D2887_to_D86(d2887_data) â†’ d86_data
â”‚  â”œâ”€ D2887_to_D2887_interp(d2887_data) â†’ interp
â”‚  â”œâ”€ D2887_to_TBP_direct(d2887_data) â†’ interp
â”‚  â”œâ”€ TBP_to_D86(tbp_data) â†’ d86_data
â”‚  â””â”€ TBP_to_TBP_interp(tbp_data) â†’ interp
â”‚
â”œâ”€ Property Calculators
â”‚  â”œâ”€ VABP_(interp) â†’ float (Â°F)
â”‚  â”œâ”€ MeABP_(interp) â†’ float (Â°C)
â”‚  â”œâ”€ WatsonK_() â†’ float
â”‚  â””â”€ convert_temperature(value, from, to) â†’ float
â”‚
â””â”€ Storage Attributes
   â”œâ”€ D86, D2887, TBP (original data as lists)
   â”œâ”€ VABP, MeABP, WatsonK (calculated properties)
   â””â”€ Density, input_type
```

---

## ğŸ”€ Temperature Unit Conversions

```
All conversion steps:

Celsius (input) â†” Rankine (internal calculations) â†” Celsius (output)

C â†’ R:  Rankine = (Celsius + 273.15) + 459.67
            = Celsius + 732.82
            
R â†’ C:  Celsius = Rankine - 732.82

F â†’ R:  Rankine = Fahrenheit + 459.67

R â†’ F:  Fahrenheit = Rankine - 459.67
```

---

## âœ… Validation Checks

```
Input Validation:
â”œâ”€ Minimum 3 data points âœ“
â”œâ”€ Temperatures strictly increasing âœ“
â”œâ”€ Density in range 600-1200 kg/mÂ³ âœ“
â”œâ”€ No negative temperatures âœ“
â””â”€ Volume % in range 0-100 âœ“

Output Validation:
â”œâ”€ D86 < D2887 < TBP maintained âœ“
â”œâ”€ Temperature differences realistic âœ“
â”‚  â”œâ”€ D86-D2887: -(3-7)Â°C
â”‚  â””â”€ TBP-D2887: +(0.5-2)Â°C
â”œâ”€ Smooth interpolation (no wiggles) âœ“
â””â”€ Properties in physical range âœ“
```

---

## ğŸš€ Execution Flow - Create Oil Object

```
1. User creates Oil instance
   Oil(data, 820, 'D86')
                    â†“
2. __init__ checks input_type
   â”œâ”€ 'D86' â†’ use directly
   â”œâ”€ 'D2887' â†’ convert to D86 first
   â””â”€ 'TBP' â†’ convert to D86 first
                    â†“
3. Calculate D86 interpolator
   (from D86 base or converted)
                    â†“
4. Calculate D2887 interpolator
   (from D86, applying Riazi)
                    â†“
5. Calculate TBP interpolator
   (from D86, applying API/Daubert)
                    â†“
6. Calculate petroleum properties
   â”œâ”€ VABP (from interpolators)
   â”œâ”€ MeABP (from interpolators)
   â””â”€ WatsonK (from properties)
                    â†“
7. Store everything in Oil instance
   Ready for use!
```

---

## ğŸ“‹ Key Data Structures

```python
# Input format (list of lists)
distillation_data = [
    [0, 160.0],      # vol%, temp_C
    [10, 180.5],
    ...
    [100, 290.0]
]

# Oil instance attributes
oil.D86_interp          # PchipInterpolator object
oil.D2887_interp        # PchipInterpolator object
oil.TBP_interp          # PchipInterpolator object

# Calling an interpolator
temp_at_50pct = oil.D86_interp(50)  # Returns float

# Properties
oil.VABP                # Float (Â°F)
oil.MeABP               # Float (Â°C)
oil.WatsonK             # Float (dimensionless)
oil.Density             # Float (kg/mÂ³)
```

---

**Diagram Version:** 1.0
**Last Updated:** November 16, 2025
**Status:** Reference documentation
